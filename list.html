<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>一覧</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyByAjXDKu5doIYKDL3uuU0zqMENxhStFWg",
  authDomain: "skinlog-a06a9.firebaseapp.com",
  projectId: "skinlog-a06a9",
  storageBucket: "skinlog-a06a9.firebasestorage.app",
  messagingSenderId: "784247637066",
  appId: "1:784247637066:web:ba77376f09feb60aedd2b3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function load(){
 const q = query(collection(db,"posts"),orderBy("created","desc"));
 const snap = await getDocs(q);

 let html="";

 snap.forEach(doc=>{
  const p=doc.data();

  html+=`
  <div style="border:1px solid #ccc;padding:15px;margin:10px 0">
  <b>${p.procedure}</b> (${p.region})<br>
  クリニック：${p.clinic}<br>
  満足度：${p.rating}<br><br>
  良かった：${p.good}<br><br>
  不満：${p.bad}<br><br>
  注意：${p.advice}
  </div>
  `;
 });

 document.getElementById("area").innerHTML=html;
}

window.onload=load;
</script>

</head>

<body style="font-family:sans-serif;max-width:700px;margin:auto;padding:20px">

<h2>体験談一覧</h2>
<div id="area">読み込み中...</div>

</body>
</html>
