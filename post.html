<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>投稿</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyByAjXDKu5doIYKDL3uuU0zqMENxhStFWg",
  authDomain: "skinlog-a06a9.firebaseapp.com",
  projectId: "skinlog-a06a9",
  storageBucket: "skinlog-a06a9.firebasestorage.app",
  messagingSenderId: "784247637066",
  appId: "1:784247637066:web:ba77376f09feb60aedd2b3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.sendPost = async function(){

  const data = {
    procedure: document.getElementById("procedure").value,
    region: document.getElementById("region").value,
    clinic: document.getElementById("clinic").value,
    rating: document.getElementById("rating").value,
    good: document.getElementById("good").value,
    bad: document.getElementById("bad").value,
    advice: document.getElementById("advice").value,
    created: serverTimestamp()
  };

  await addDoc(collection(db,"posts"),data);

  alert("投稿完了");
  location.href="list.html";
}
</script>

</head>

<body style="font-family:sans-serif;max-width:700px;margin:auto;padding:20px">

<h2>体験談投稿</h2>

施術<br>
<input id="procedure"><br><br>

地域<br>
<input id="region"><br><br>

クリニック<br>
<input id="clinic"><br><br>

満足度<br>
<select id="rating">
<option>★</option>
<option>★★</option>
<option>★★★</option>
<option>★★★★</option>
<option>★★★★★</option>
</select><br><br>

良かった点<br>
<textarea id="good"></textarea><br><br>

不満点<br>
<textarea id="bad"></textarea><br><br>

注意点<br>
<textarea id="advice"></textarea><br><br>

<button onclick="sendPost()">投稿する</button>

</body>
</html>
